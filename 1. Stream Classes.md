# 1\. Stream Classes

![noteattachment1][6f9b37b01a8f2829db162a9a3814d706]

  

Notes:

  * MemorySream read/writes to/from an array
  * Pipes are used for processes to communicate with each other through the Windows Pipes protocol. An anonymous pipe is one-way communication between a parent and child process on the same computer. A named pipe is two way communication between processes on the same computer or different computers. 

  

  

![noteattachment2][66f0009e44433bf842ce98bbe5e38bf2]  

  

The diagram above shows that [Backing Store
Streams](evernote:///view/26944639/s226/aeffc961-135b-4d26-8bcc-4c0a9a69eea0/aeffc961-135b-4d26-8bcc-4c0a9a69eea0/)
provide raw data, [Decorator
Streams](evernote:///view/26944639/s226/756c3908-dbb5-4f4c-a8e0-8589cfeb2166/756c3908-dbb5-4f4c-a8e0-8589cfeb2166/)
provide binary transformation (compression, encryption, etc.) and [Stream
Adapters](evernote:///view/26944639/s226/6aefc684-49ae-45c7-a6bb-b5d6a4d00eb6/6aefc684-49ae-45c7-a6bb-b5d6a4d00eb6/)
give access to a higher level abstraction of bytes (e.g. XML).

  

The base Stream class provides an interface for reading, writing and seeking
in a stream of data. There are also asynchronous equivalents.

  * Reading is translating a series of bytes into meaningful data.
  * Writing is translating an object into bytes and sending it to the stream.
  * Seeking is moving the cursor around the steam. Not all stream types (e.g. network interfaces) support seeking.

**Combining Multiple Streams**

Multiple stream objects can be combined together to perform complex
operations. This is the decorator pattern - each stream wraps another stream.
This design gives you flexibility - the output could be a file or bytes held
in memory depending on the stream you use.

  

E.g. this code shows the difference between using compression and not. It
compresses data using GZipStream and passes it onto a FileStream to create a
file.

  

string folder = @"C:\temp";

string uncompressedFilePath = Path.Combine(folder, "uncompressed.data");

string compressedFilePath = Path.Combine(folder, "compressed.gz");

byte[] dataToCompress = Enumerable.Repeat((byte)'a', 1024 * 1024).ToArray();

  

using (FileStream uncompressedFileStream = File.Create(uncompressedFilePath))

{

uncompressedFileStream.Write(dataToCompress, 0, dataToCompress.Length);

}

  

using (FileStream compressedFileStream = File.Create(compressedFilePath))

{

using (GZipStream compressionStream = new GZipStream(compressedFileStream,
CompressionMode.Compress))

{

compressionStream.Write(dataToCompress, 0, dataToCompress.Length);

}

}

  

Another example is BufferedStream. This class gives you a performance gain by
stopping very small read/writes.

  

string path = @"C:\temp\test.txt";

  

using (FileStream fileStream = File.Create(path))

{

using (BufferedStream bufferedStream = new BufferedStream(fileStream))

{

using (StreamWriter streamWriter = new StreamWriter(bufferedStream))

{

streamWriter.WriteLine("A line of text");

}

}

}

  

 **Network Communication**

WebRequest and WebResponse are used to send/receive data across a network.
WebRequest.Create() is used to create the object. If you pass in a HTTP
address then it returns a HttpWebRequest object. You can also pass other
details to the WebRequest object, including authentication and caching
instructions. When done, call GetResponse() to execute the request and receive
the response.

  

WebRequest request = WebRequest.Create("<http://www.microsoft.com>");

  

using (WebResponse response = request.GetResponse())

{

using (StreamReader responseStream = new
StreamReader(response.GetResponseStream()))

{

string responseText = responseStream.ReadToEnd();

Console.WriteLine(responseText);

}

}

  

Console.ReadKey();

  

  


---
### ATTACHMENTS
[6f9b37b01a8f2829db162a9a3814d706]: media/1._Stream_Classes
[1._Stream_Classes](media/1._Stream_Classes)
[66f0009e44433bf842ce98bbe5e38bf2]: media/1-2._Stream_Classes
[1-2._Stream_Classes](media/1-2._Stream_Classes)
---
### NOTE ATTRIBUTES
>Created Date: 2016-11-16 19:10:07  
>Last Evernote Update Date: 2017-03-16 17:09:18  
>author: simonjstanford@gmail.com  
>source: desktop.win  
>source-url: https://msdn.microsoft.com/en-us/library/system.io.binarywriter(v=vs.110).aspx  
>source-application: evernote.win32  