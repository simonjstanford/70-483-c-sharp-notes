# 2\. Connecting to a Database

You need a connection string. Connections in .NET all inherit from the
DbConnection base class. SqlConnection is used to connection to a SQL Server
database. Connections must be closed after use - they are not managed. The
DbConnection class implements IDisposable so is automatically closed by a
using statement.


![Table 9-9](https://github.com/simonjstanford/70-483-c-sharp-notes/blob/master/media/Table9-9.png)

  

  

If necessary, connection strings can be built using a class that derives from
DbConnectionStringBuilder, e.g. OracleConnectionStringBuilder or
SqlConnectionStringBuilder.

    var stringBuilder = new SqlConnectionStringBuilder();
    
    stringBuilder.DataSource = @"(localdb)\v11.0";
    stringBuilder.InitialCatalog = "ProgrammingInCSharp";
    
    string connectionString = stringBuilder.ToString(); 

Best practice is to not create connection strings programmatically, but to
store them in app.config or web.config:

  

    <configuration>
        <connectionStrings>
            <add name="testConnectionString"
                 providerName="System.Data.SqlClient"
                 connectionString="Data Source=(localdb)\v11.0;Initial Catalog=ProgrammingInCSharp;" />
        </connectionStrings>
    </configuration>

  

You can then access them through the System.Configuration.dll. Connection
strings can be accessed by index or name:

  

    string connectionString =
    ConfigurationManager.ConnectionStrings["testConnectionString"].ConnectionString;

  

 **Connection Pools**

SQL Server enables connection pooling by default. This is an optimisation
technique that maintains a pool of connections. When someone requests a
connection and there is already an open connection in the pool then the
connection is reused. This stops connections being created on each request.


---
### ATTACHMENTS
[94f6a35d6576e7f99dcec9ae12ceba5b]: media/2._Connecting_to_a_Database
[2._Connecting_to_a_Database](media/2._Connecting_to_a_Database)

<!--stackedit_data:
eyJoaXN0b3J5IjpbODk1OTk5MzU3XX0=
-->